(macro (stack A B) (A B))
(macro (stack A B C ...) (A (stack B C ...)))

(def g {
  [+test1 1]
  [+test2 {
    [+test21 2]
    [+test22 {
      [+test3 3]}]}]})

' (def x (stack eval exec { #g @[-test1] }))
' (== #x 1)

' (def x (stack eval exec { #g @[-test2] }))
' (def y (stack eval exec { #x @[-test21] }))
' (== #y 2)

' (def x (stack eval exec { #g @[-test2] }))
' (def y (stack eval exec { #x @[-test22] }))
' (def z (stack eval exec { #y @[-test3] }))
' (== #z 3)
