(use-macros "../milkyway/prelude.sg")

(def left  [(+5 [l l|X]) (+5 [l r|X]) || (slice c a)])
(def right [(+5 [r l|X]) (+5 [r r|X]) || (slice c b)])

(def with { #left #right })

(def plus {
  [(+3 [l l|X]) (c X)]
  [(+3 [l r|X]) (d X)]})

(def cut [(-5 X) (-3 X)])

(stack show exec (process
  #with
  { #plus #cut }))
